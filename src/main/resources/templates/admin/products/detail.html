<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title>상품 상세보기</title>
  <link rel="stylesheet" th:href="@{/css/admin-style.css}" />
  <style>
    :root { --primary:#4F46E5; --muted:#f6f7fb; --danger:#dc2626; --border:#e5e7eb; --text:#111827; }
    body { font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto; background:#fff; color:var(--text); }
    .container{ max-width:1000px; margin:32px auto; padding:0 16px; }
    .titlebar{ display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
    .title{ font-size:22px; font-weight:800; margin:0; }
    .tag{ padding:3px 10px; font-size:12px; border-radius:999px; background:#EEF2FF; color:#3730A3; }
    .card{ background:#fff; border:1px solid var(--border); border-radius:16px; padding:20px; box-shadow:0 6px 18px rgba(0,0,0,.04); }
    .grid{ display:grid; grid-template-columns: 340px 1fr; gap:24px; }
    .imagebox{ border:1px dashed var(--border); border-radius:12px; background:#f9fafb; display:flex; align-items:center; justify-content:center; overflow:hidden; aspect-ratio:1/1; }
    .imagebox img{ width:100%; height:100%; object-fit:cover; }
    .kv{ display:grid; grid-template-columns: 120px 1fr; row-gap:10px; column-gap:12px; }
    .kv dt{ color:#6b7280; font-weight:700; }
    .kv dd{ margin:0; }
    .link a{ color:#2563eb; word-break:break-all; text-decoration:none; }
    .btnbar{ display:flex; gap:8px; margin-top:18px; }
    .btn{ padding:10px 14px; border-radius:10px; border:1px solid var(--border); background:#fff; cursor:pointer; text-decoration:none; display:inline-flex; align-items:center; }
    .btn-primary{ background:var(--primary); color:#fff; border-color:var(--primary); }
    .btn-danger{ color:#b91c1c; }
    .price{ font-variant-numeric: tabular-nums; white-space:nowrap; }
  </style>
</head>
<body>
<div class="admin-shell">
  <!-- 사이드바 -->
  <div th:replace="~{admin/fragments/sidebar :: sidebar(${#execInfo.templateName})}"></div>

  <main class="admin-content">
    <div class="container">
      <div class="titlebar">
        <h1 class="title">상품 상세보기</h1>
        <span class="tag">DETAIL</span>
      </div>

      <div class="card">
        <div class="grid">
          <!-- 이미지 -->
          <div>
            <div class="imagebox" th:if="${product.src != null and !product.src.isEmpty()}">
              <img th:src="${product.src}"
                   th:onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQwIiBoZWlnaHQ9IjM0MCIgdmlld0JveD0iMCAwIDM0MCAzNDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjM0MCIgaGVpZ2h0PSIzNDAiIGZpbGw9IiNGM0Y0RjYiLz48L3N2Zz4='"
                   th:alt="${product.name}">
            </div>
            <div class="imagebox" th:if="${product.src == null or product.src.isEmpty()}">
              <span style="color:#9ca3af;">이미지 없음</span>
            </div>
          </div>

          <!-- 기본 정보 -->
          <div>
            <dl class="kv">
              <dt>ID</dt>
              <dd th:text="${product.id}">1</dd>

              <dt>상품명</dt>
              <dd th:text="${product.name}">상품명</dd>

              <dt>카테고리</dt>
              <dd th:text="${product.categoryName}">카테고리</dd>

              <dt>상품 타입</dt>
              <dd th:text="${product.productType}">타입</dd>

              <dt>가격</dt>
              <dd class="price" th:text="${#numbers.formatInteger(product.cost, 3, 'COMMA')} + '원'">10,000원</dd>
            </dl>

            <div class="link" style="margin-top:14px;">
              <strong style="display:block; margin-bottom:6px; color:#6b7280;">상품 링크</strong>
              <a th:href="${product.link}" th:text="${product.link}" target="_blank">링크</a>
            </div>

            <div class="btnbar">
              <a th:href="@{/admin/products}" class="btn">목록으로</a>
              <a th:href="@{/admin/products/{id}/edit(id=${product.id})}" class="btn btn-primary">수정</a>
              <form th:action="@{/admin/products/{id}/delete(id=${product.id})}" method="post" onsubmit="return confirm('정말로 삭제하시겠습니까?');" style="display:inline;">
                <button type="submit" class="btn btn-danger">삭제</button>
              </form>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>
</body>
</html>
